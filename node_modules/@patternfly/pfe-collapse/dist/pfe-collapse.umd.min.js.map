{"version":3,"file":"pfe-collapse.umd.min.js","sources":["../_temp/pfe-collapse.umd.js"],"sourcesContent":["/*!\n * PatternFly Elements: PfeCollapse 1.12.3\n * @license\n * Copyright 2021 Red Hat, Inc.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n * \n*/\n\nimport PFElement from \"../../pfelement/dist/pfelement\";\n\nfunction generateId() {\n  return Math.random().toString(36).substr(2, 9);\n}\n\nclass PfeCollapseToggle extends PFElement {\n\n  // Injected at build-time\n  static get version() {\n    return \"1.12.3\";\n  }\n\n  // Injected at build-time\n  get html() {\n    return `\n<style>:host{display:block;cursor:default} /*# sourceMappingURL=pfe-collapse-toggle.min.css.map */</style>\n<slot></slot>`;\n  }\n\n  // Injected at build-time\n  static get slots() {\n    return {\"default\":{\"title\":\"Default\",\"type\":\"array\",\"namedSlot\":false,\"items\":{\"oneOf\":[{\"$ref\":\"pfe-collapsibe-toggle\"},{\"$ref\":\"pfe-collapse-panel\"}]}}};\n  }\n\n  static get tag() {\n    return \"pfe-collapse-toggle\";\n  }\n\n  get templateUrl() {\n    return \"pfe-collapse-toggle.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-collapse-toggle.scss\";\n  }\n\n  get expanded() {\n    return this.getAttribute(\"aria-expanded\") === \"true\";\n  }\n\n  set expanded(val) {\n    const value = Boolean(val);\n    this.setAttribute(\"aria-expanded\", value);\n  }\n\n  static get properties() {\n    return {\n      ariaExpanded: {\n        title: \"Aria expanded\",\n        type: String,\n        prefix: false,\n        values: [\"true\", \"false\"],\n      },\n      ariaControls: {\n        title: \"Aria controls\",\n        type: String,\n        prefix: false,\n        observer: \"_ariaControlsChanged\",\n      },\n    };\n  }\n\n  constructor(pfeClass, { setTabIndex = true, addKeydownHandler = true } = {}) {\n    super(pfeClass || PfeCollapseToggle);\n\n    this.controlledPanel = false;\n    this._setTabIndex = setTabIndex;\n    this._addKeydownHandler = addKeydownHandler;\n\n    this.addEventListener(\"click\", this._clickHandler);\n\n    if (addKeydownHandler) {\n      this.addEventListener(\"keydown\", this._keydownHandler);\n    }\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.expanded = false;\n\n    this.id = this.id || `${PfeCollapseToggle.tag}-${generateId()}`;\n\n    this.setAttribute(\"role\", \"button\");\n\n    if (this._setTabIndex) {\n      this.setAttribute(\"tabindex\", 0);\n    }\n\n    if (!this.controlledPanel) {\n      this._connectPanel(this.getAttribute(\"aria-controls\"));\n    }\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this.removeEventListener(\"click\", this._clickHandler);\n\n    if (this._addKeydownHandler) {\n      this.removeEventListener(\"keydown\", this._keydownHandler);\n    }\n  }\n\n  _ariaControlsChanged(oldVal, newVal) {\n    if (!newVal) {\n      return;\n    }\n\n    this._connectPanel(newVal);\n  }\n\n  toggle() {\n    if (this.hasAttribute(\"disabled\")) {\n      return;\n    }\n\n    this.expanded = !this.expanded;\n\n    // one last try to hook up a panel\n    if (!this.controlledPanel) {\n      this._connectPanel(this.getAttribute(\"aria-controls\"));\n    }\n\n    if (this.controlledPanel) {\n      this.controlledPanel.expanded = this.expanded;\n\n      this.emitEvent(PfeCollapse.events.change, {\n        detail: {\n          expanded: this.expanded,\n          toggle: this,\n          panel: this.controlledPanel,\n        },\n      });\n    } else {\n      this.warn(`This toggle doesn't have a panel associated with it`);\n    }\n  }\n\n  _clickHandler() {\n    this.toggle();\n  }\n\n  _keydownHandler(event) {\n    const key = event.key;\n\n    switch (key) {\n      case \" \":\n      case \"Spacebar\":\n      case \"Enter\":\n        this.toggle();\n        break;\n    }\n  }\n\n  _connectPanel(id) {\n    // this can be an issue if the pfe-collapse is located within\n    // a shadow root\n    if (this.getRootNode) {\n      this.controlledPanel = this.getRootNode().querySelector(`#${id}`);\n    } else {\n      this.controlledPanel = document.querySelector(`#${id}`);\n    }\n  }\n}\n\nclass PfeCollapsePanel extends PFElement {\n\n  // Injected at build-time\n  static get version() {\n    return \"1.12.3\";\n  }\n\n  // Injected at build-time\n  get html() {\n    return `\n<style>:host{display:none;overflow:hidden;will-change:height}:host([expanded]){display:block;position:relative}:host(.animating){display:block;-webkit-transition:height .3s ease-in-out;transition:height .3s ease-in-out} /*# sourceMappingURL=pfe-collapse-panel.min.css.map */</style>\n<slot></slot>`;\n  }\n\n  // Injected at build-time\n  static get slots() {\n    return {\"default\":{\"title\":\"Default\",\"type\":\"array\",\"namedSlot\":false,\"items\":{\"oneOf\":[{\"$ref\":\"pfe-collapsibe-toggle\"},{\"$ref\":\"pfe-collapse-panel\"}]}}};\n  }\n\n  static get tag() {\n    return \"pfe-collapse-panel\";\n  }\n\n  static get events() {\n    return {\n      animationStart: `${this.tag}:animation-start`,\n      animationEnd: `${this.tag}:animation-end`,\n    };\n  }\n\n  get templateUrl() {\n    return \"pfe-collapse-panel.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-collapse-panel.scss\";\n  }\n\n  get animates() {\n    return this.animation === \"false\" ? false : true;\n  }\n\n  get expanded() {\n    return this.hasAttribute(\"expanded\") || this.hasAttribute(\"pfe-expanded\"); // @TODO: Deprecated\n  }\n\n  set expanded(val) {\n    const value = Boolean(val);\n\n    if (value) {\n      this.setAttribute(\"pfe-expanded\", \"\"); // @TODO: Deprecated\n      this.setAttribute(\"expanded\", \"\");\n\n      if (this.animates) {\n        const height = this.getBoundingClientRect().height;\n        this._fireAnimationEvent(\"opening\");\n        this._animate(0, height);\n      }\n    } else {\n      if (this.hasAttribute(\"expanded\") || this.hasAttribute(\"pfe-expanded\")) {\n        // @TODO: Deprecated\n        const height = this.getBoundingClientRect().height;\n        this.removeAttribute(\"expanded\");\n        this.removeAttribute(\"pfe-expanded\"); // @TODO: Deprecated\n\n        if (this.animates) {\n          this._fireAnimationEvent(\"closing\");\n          this._animate(height, 0);\n        }\n      }\n    }\n  }\n\n  static get properties() {\n    return {\n      animation: {\n        title: \"Animation\",\n        type: String,\n        values: [\"false\"],\n      },\n      // @TODO: Deprecated\n      oldAnimation: {\n        alias: \"animation\",\n        attr: \"pfe-animation\",\n      },\n    };\n  }\n\n  constructor(pfeClass) {\n    super(pfeClass || PfeCollapsePanel);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    this.expanded = false;\n\n    this.id = this.id || `${PfeCollapsePanel.tag}-${generateId()}`;\n  }\n\n  _animate(start, end) {\n    this.classList.add(\"animating\");\n    this.style.height = `${start}px`;\n\n    requestAnimationFrame(() => {\n      requestAnimationFrame(() => {\n        this.style.height = `${end}px`;\n        this.classList.add(\"animating\");\n        this.addEventListener(\"transitionend\", this._transitionEndHandler);\n      });\n    });\n  }\n\n  _transitionEndHandler(event) {\n    event.target.style.height = \"\";\n    event.target.classList.remove(\"animating\");\n    event.target.removeEventListener(\"transitionend\", this._transitionEndHandler);\n\n    this.emitEvent(PfeCollapsePanel.events.animationEnd, {\n      detail: {\n        expanded: this.expanded,\n        panel: this,\n      },\n    });\n  }\n\n  _fireAnimationEvent(state) {\n    this.emitEvent(PfeCollapsePanel.events.animationStart, {\n      detail: {\n        state: state,\n        panel: this,\n      },\n    });\n  }\n}\n\nclass PfeCollapse extends PFElement {\n\n  // Injected at build-time\n  static get version() {\n    return \"1.12.3\";\n  }\n\n  // Injected at build-time\n  get html() {\n    return `\n<style>:host{display:block}:host([hidden]){display:none}:host(.animating),:host([expanded]){display:block} /*# sourceMappingURL=pfe-collapse.min.css.map */</style>\n<slot></slot>`;\n  }\n\n  // Injected at build-time\n  static get slots() {\n    return {\"default\":{\"title\":\"Default\",\"type\":\"array\",\"namedSlot\":false,\"items\":{\"oneOf\":[{\"$ref\":\"pfe-collapsibe-toggle\"},{\"$ref\":\"pfe-collapse-panel\"}]}}};\n  }\n\n  static get tag() {\n    return \"pfe-collapse\";\n  }\n\n  get templateUrl() {\n    return \"pfe-collapse.html\";\n  }\n\n  get styleUrl() {\n    return \"pfe-collapse.scss\";\n  }\n\n  get schemaUrl() {\n    return \"pfe-collapse.json\";\n  }\n\n  get animates() {\n    return this.animation === \"false\" ? false : true;\n  }\n\n  static get events() {\n    return {\n      change: `${this.tag}:change`,\n    };\n  }\n\n  static get properties() {\n    return {\n      animation: {\n        title: \"Animation\",\n        type: String,\n        values: [\"false\"],\n        observer: \"_animationChanged\",\n      },\n      // @TODO: Deprecated\n      oldAnimation: {\n        alias: \"animation\",\n        attr: \"pfe-animation\",\n      },\n    };\n  }\n\n  constructor(pfeClass) {\n    super(pfeClass || PfeCollapse);\n\n    this._toggle = null;\n    this._panel = null;\n    this._linkControls = this._linkControls.bind(this);\n    this._changeHandler = this._changeHandler.bind(this);\n    this._observer = new MutationObserver(this._linkControls);\n\n    this.addEventListener(PfeCollapse.events.change, this._changeHandler);\n    this.addEventListener(PfeCollapse.events.animationStart, this._animationStartHandler);\n    this.addEventListener(PfeCollapse.events.animationEnd, this._animationEndHandler);\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n\n    Promise.all([\n      customElements.whenDefined(PfeCollapsePanel.tag),\n      customElements.whenDefined(PfeCollapseToggle.tag),\n    ]).then(() => {\n      if (this.hasLightDOM()) this._linkControls();\n\n      this._observer.observe(this, { childList: true });\n    });\n  }\n\n  disconnectedCallback() {\n    super.disconnectedCallback();\n\n    this.removeEventListener(PfeCollapse.events.change, this._changeHandler);\n    this.removeEventListener(PfeCollapse.events.animationStart, this._animationStartHandler);\n    this.removeEventListener(PfeCollapse.events.animationEnd, this._animationEndHandler);\n    this._observer.disconnect();\n  }\n\n  _animationChanged(oldVal, newVal) {\n    if (!newVal) {\n      return;\n    }\n\n    if (newVal !== \"false\" && newVal !== \"true\") {\n      return;\n    }\n\n    if (this._panel) {\n      this._panel.animation = newVal;\n    }\n  }\n\n  toggle() {\n    this._toggle.toggle();\n  }\n\n  _linkControls() {\n    this._toggle = this.querySelector(PfeCollapseToggle.tag);\n    this._panel = this.querySelector(PfeCollapsePanel.tag);\n\n    this._toggle.setAttribute(\"aria-controls\", this._panel.id);\n  }\n\n  _animationStartHandler() {\n    this.classList.add(\"animating\");\n  }\n\n  _animationEndHandler() {\n    this.classList.remove(\"animating\");\n  }\n\n  _changeHandler(event) {}\n}\n\nPFElement.create(PfeCollapse);\nPFElement.create(PfeCollapseToggle);\nPFElement.create(PfeCollapsePanel);\n\nexport { PfeCollapse, PfeCollapseToggle, PfeCollapsePanel };\n"],"names":["generateId","Math","random","toString","substr","PfeCollapseToggle","PFElement","this","getAttribute","val","value","Boolean","setAttribute","default","title","type","namedSlot","items","oneOf","$ref","String","expanded","id","tag","_setTabIndex","controlledPanel","_connectPanel","removeEventListener","_clickHandler","_addKeydownHandler","_keydownHandler","oldVal","newVal","hasAttribute","emitEvent","PfeCollapse","events","change","warn","toggle","event","key","getRootNode","querySelector","document","pfeClass","setTabIndex","addKeydownHandler","addEventListener","_this","PfeCollapsePanel","animation","height","animates","getBoundingClientRect","_fireAnimationEvent","_animate","removeAttribute","start","end","classList","add","style","_this3","_transitionEndHandler","target","remove","animationEnd","state","animationStart","all","customElements","whenDefined","then","_this5","hasLightDOM","_linkControls","_observer","observe","childList","_changeHandler","_animationStartHandler","_animationEndHandler","disconnect","_panel","_toggle","_this4","bind","MutationObserver","create"],"mappings":"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"}